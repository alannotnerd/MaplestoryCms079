/* 
	
*/
var status = -1;
var hair_Colo_new;
var random = java.lang.Math.floor(Math.random() * 9 + 1);
//var hair_N = Array(30040,30150,30530,30610,30640,30680,30630,30620,30310,30270,30330,30340,30320,30230,30220,30200,30190,30260,30280,30360,30370,30400,30410,30440,30460,30470,30490,30510,30540,30550,30560,30600,30650,30660,30700,30710,30730,30720,30770,30790,30810,30820,30832,30840,30850,30860,30870,30880,30890,30900,30910,30920,30930,30940,30950,30990,33000,33030,33040,33050);

//var hair_V = Array(31020,31060,31070,31080,31090,31110,31130,31140,31150,31160,31170,31180,31190,31210,31220,31230,31240,31250,31260,31270,31280,31290,31300,31310,31320,31330,31340,31350,31400,31410,31420,31440,31450,31460,31470,31480,31490,31510,31520,31530,31540,31550,31560,31610,31620,31630,31640,31650,31660,31670,31680,31690,31700,31710,31720,31730,31740,31750,31760,31770,31790,31800,31810,31830,31840,31850,31860,31880,31890,31910,31920,31930,31940,31950,34000,34010,34040,34050,34060);

//var hair_Z;

function action(mode, type, selection) {
    if (mode == 0) {
        cm.dispose();
        return;
    } else {
        status++;
    }
    if (status == 0) {
            //var hair1 = cm.getPlayerStat("HAIR");
           // if (cm.getPlayerStat("GENDER") == 0) {
			//	for (var i = 0; i < 60; i++) {
			//		hair_Z = hair_N;
			//	}
			//}else{
			//	for (var i = 0; i < 79; i++) {
			//		hair_Z = hair_V;
			//	}
			//}
        cm.sendSimple("你好。我是豆豆冒险岛皇家理发师。如果你有#b#t05150040##k，我可以为你设计一个发型。怎么样？购买之后 直接找下面的传说整容师和老板娘直接换!不用随即换头发!\r\n\#b#L1#皇家理发券购买1张：3000点卷#l\r\n#b#L2#皇家理发券购买10张：30000点卷#l\r\n");
    } else if (status == 1) {
        if (selection == 0) {
            var hair = cm.getPlayerStat("HAIR");
            hair_Colo_new = [];
            if (cm.getPlayerStat("GENDER") == 0) {
					if(random <= 3 &&random >= 0){
				    hair_Colo_new = [36440,36450,36490,36510,36520,36580,36590,36600,36620,36630,36640,36650,36670,36680,36690,36700,36710,36720,36730,36750,36810,36820,36830,36840,36850,36860,36880,36890,36910,36920,36930,36940,36950,36990,33260,33270,33280,33290,33300,33310,33320,33330,33340,33360,33370,33380,33390,33400,33410,33430,33440,33460,33470,33480,33500,33520,33540,33550,33580,33600,33630,33640,33660,33810,33930,33940,33950,33960,35180,35200,35210,35220,35230,35240,35250,35260,35270,35280,35290,35300,35330,35340,35350,35360,35420,35430,35440,35450,35460,35470,35490,35510,35520,35560,35600,35620,35630,35650,35660,35680,35690,35700,35720,35730,35750,35760,35770,35790,35800,35950,35960,36070,36080,36130,36140,36160,36180,36260,36280,36310,36330,36340,36350,36360,36380,36390,36410,36421];
            		
					}else{
				    hair_Colo_new = [30190,30200,30380,30370,30490,30510,30570,30590,30650,30660,30820,30840,30860,30870,30880,30890,30910,30928,32120,33000,32500,32490,32470,33030,33040,33110,33150,33160,33170,33180,33190,33240,33250];
            		
					}
               // hair_Colo_new = [30040,30150,30530,30610,30640,30680,30630,30620,30310,30270,30330,30340,30320,30230,30220,30200,30190,30260,30280,30360,30370,30400,30410,30440,30460,30470,30490,30510,30540,30550,30560,30600,30650,30660,30700,30710,30730,30720,30770,30790,30810,30820,30832,30840,30850,30860,30870,30880,30890,30900,30910,30920,30930,30940,30950,30990,33000,33030,33040,33050];
            } else {
					if(random <= 4 &&random >= 0){
					hair_Colo_new = [31340,31360,31530,31560,31590,31670,31680,31840,31930,31990,32130,32140,32150,32160,32510,33680,33790,33950,34100,34110,34120,34130,34160,34180,34210,34220,34230,34240,34250,34260,34270,34280,34310,34320,34330,34340,34350,34360,34370,34380,34450,34470,34480,34490,34510,34540,34560,34590,34610,34620,34630,34640,34660,34670,34680,34690,34700,34710,34720,34730,34750,34760,34770,34780,34790,34800,34810,34830,34840,34850,34860,34870,34880,34890,34900,34910,34940,34950,34960,34970,34980,35080,35190,35210,35490,35500,35540,35640,36340,36400,36940,37000,37010,37030,37041,37050,37060,37070,37080,37090,37100,37110,37180,37190,37200,37210,37220,37230,37270,37280,37290,37300,37310,37320,37330,37340,37350,37370,37380,37400,37420,37410,37430,37440,37450,37460,37500];
           	
					}else{
				    hair_Colo_new = [37510,37520,37530,37540,37560,37580,37590,37610,37620,37630,37640,37650,37670,37680,37690,37700,37710,37720,37730,37740,37750,37760,37770,37780,37790,37800,37810,37820,37830,37840,37850,37860,37880,37890,37900,37910,37920,37930,37940,37950,37960,37970,37980,37990,38000,38010,38020,38030,38040,38050,38060,38070,38080,38090,38100,38110,38120,38130,38150,38160,38220,38240,38250,38260,38270,38280,38290,38300,38310,38320,38330,38340,38350,38360,38370,38380,38390,38400,38410,38420,38430,38440,38450,38460,38470,38480,38490,38500,38520,38530,38540,38560,38570,38580,38590,38600,38610,38620,38630,38640,38650,38660,38670,38680,38690,38700,38710,38730,38740,38750,38760,38770,38790,38800,38810,38840,38850,38860,38880,38890,38900,38910,38930,38940];
           		
					}
             //   hair_Colo_new = [31020,31060,31070,31080,31090,31110,31130,31140,31150,31160,31170,31180,31190,31210,31220,31230,31240,31250,31260,31270,31280,31290,31300,31310,31320,31330,31340,31350,31400,31410,31420,31440,31450,31460,31470,31480,31490,31510,31520,31530,31540,31550,31560,31610,31620,31630,31640,31650,31660,31670,31680,31690,31700,31710,31720,31730,31740,31750,31760,31770,31790,31800,31810,31830,31840,31850,31860,31880,31890,31910,31920,31930,31940,31950,34000,34010,34040,34050,34060];
            }
            for (var i = 30000; i < hair_Colo_new.length; i++) {
                hair_Colo_new[i] = hair_Colo_new[i] + (hair % 10);
            }
            cm.sendYesNo("使用皇家理发券，可以随机更换发型。你真的要使用#b#t05150040##k，更换发型吗？");
        }else if(selection == 1){
			if(cm.getPlayer().getCSPoints(1) >= 3000){
				cm.gainNX(-3000);
				cm.gainItem(5150040, 1);
				cm.sendOk("购买成功！");
				cm.worldMessage(6,"玩家：["+cm.getName()+"]购买了1张皇家理发卷！！！");
				cm.dispose();
			}else{
				cm.sendOk("点卷不足无法购买！");
				cm.dispose();
			}
        }else if(selection == 2){
			if(cm.getPlayer().getCSPoints(1) >= 30000){
				cm.gainNX(-30000);
				cm.gainItem(5150040, 10);
				cm.sendOk("购买成功！");
				cm.worldMessage(6,"玩家：["+cm.getName()+"]购买了10张皇家理发卷！！！");
				cm.dispose();
			}else{
				cm.sendOk("点卷不足无法购买！");
				cm.dispose();
			}
        }else if(selection == 3){
			if(cm.getPlayer().getCSPoints(1) >= 300000){
				cm.gainNX(-80000);
				cm.gainItem(5150040, 100);
				cm.sendOk("购买成功！");
				cm.worldMessage(6,"玩家：["+cm.getName()+"]购买了100张皇家理发卷！(购买地点：射手村理发店)");
				cm.dispose();
			}else{
				cm.sendOk("点卷不足无法购买！");
				cm.dispose();
			}
        }else if(selection == 4){
			if(cm.getPlayer().getCSPoints(1) >= 42000){
				cm.gainNX(-42000);
				cm.gainItem(5150040, 50);
				cm.sendOk("购买成功！");
				cm.worldMessage(6,"玩家：["+cm.getName()+"]购买了50张皇家理发卷！(购买地点：射手村理发店)");
				cm.dispose();
			}else{
				cm.sendOk("点卷不足无法购买！");
				cm.dispose();
			}
			
		}
    } else if (status == 2) {
	    //cm.gainItemPeriod(5150040,1,1);
        if (cm.setRandomAvatar(5150040, hair_Colo_new) == 1) {
            cm.sendOk("好了,让朋友们赞叹你的新发型吧!");
        } else {
            cm.sendOk("必须要有皇家理发券，我才能为你理发。");
        }
        cm.safeDispose();
    }
}
